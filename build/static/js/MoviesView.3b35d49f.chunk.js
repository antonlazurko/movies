(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[4],{119:function(t,e,n){"use strict";n.d(e,"e",(function(){return l})),n.d(e,"d",(function(){return j})),n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return b})),n.d(e,"c",(function(){return d}));var c=n(120),a=n.n(c),o=n(121),r="https://api.themoviedb.org/3",i="d66f8875c56322c0e6582f80570eea14";function s(){return u.apply(this,arguments)}function u(){return(u=Object(o.a)(a.a.mark((function t(){var e,n,c=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=c.length>0&&void 0!==c[0]?c[0]:"",t.next=3,fetch(e);case 3:if(!(n=t.sent).ok){t.next=10;break}return t.next=7,n.json();case 7:t.t0=t.sent,t.next=11;break;case 10:t.t0=Promise.reject(new Error("Not found"));case 11:return t.abrupt("return",t.t0);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function l(){return s("".concat(r,"/trending/all/day?api_key=").concat(i))}var j=function(t,e){return s("".concat(r,"/search/movie?api_key=").concat(i,"&query=").concat(t,"&page=").concat(e))};function f(t){return s("".concat(r,"/movie/").concat(t,"?api_key=").concat(i))}function b(t){return s("".concat(r,"/movie/").concat(t,"/credits?api_key=").concat(i))}function d(t){return s("".concat(r,"/movie/").concat(t,"/reviews?api_key=").concat(i))}},123:function(t,e,n){"use strict";e.a={IDLE:"idle",PENDING:"pending",RESOLVED:"resolved",REJECTED:"rejected"}},129:function(t,e,n){t.exports={list:"MoviesView_list__15dqM",item:"MoviesView_item__1Zm0g",title:"MoviesView_title__K0mGv",listNotification:"MoviesView_listNotification__vkVoa"}},155:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return N}));var c=n(4),a=n(142),o=n(143),r=n(33),i=n(2),s=n(24),u=n(126),l=n(149),j=n(150),f=n(115),b=n(130),d=n.n(b),h=n(16),m=n(119),p=n(128),O=n.n(p),v=n(109),x=n(156),E=n(153),g=(n(127),Object(v.a)((function(t){return Object(x.a)({root:{marginTop:"40px"},searchBar:{display:"flex",justifyContent:"center"}})})));function y(t){var e=t.onSearchbarSubmit,n=g(),a=Object(i.useState)(""),o=Object(r.a)(a,2),s=o[0],l=o[1];return Object(c.jsx)("div",{className:n.searchBar,children:Object(c.jsxs)("form",{className:n.root,onSubmit:function(t){t.preventDefault(),""!==s.trim()?(e(s.toLowerCase()),l("")):Object(u.b)("Type something to find.")},noValidate:!0,autoComplete:"off",children:[Object(c.jsx)(E.a,{placeholder:"Search movies",inputProps:{"aria-label":"description"},value:s,type:"text",autoComplete:"off",autoFocus:!0,onChange:function(t){return l(t.currentTarget.value)}}),Object(c.jsx)(f.a,{variant:"contained",color:"secondary",size:"small",type:"submit",startIcon:Object(c.jsx)(O.a,{}),children:"Search"})]})})}var S=n(123),w=n(129),_=n.n(w);function N(){var t,e=Object(h.g)(),n=Object(h.h)(),b=Object(i.useState)(null!==(t=new URLSearchParams(n.search).get("query"))&&void 0!==t?t:""),p=Object(r.a)(b,2),O=p[0],v=p[1],x=Object(i.useState)(1),E=Object(r.a)(x,2),g=E[0],w=E[1],N=Object(i.useState)([]),k=Object(r.a)(N,2),D=k[0],C=k[1],V=Object(i.useState)(S.a.IDLE),L=Object(r.a)(V,2),R=L[0],T=L[1],I=Object(i.useState)(""),P=Object(r.a)(I,2),q=P[0],J=P[1];Object(i.useEffect)((function(){w(1),C([])}),[O]);return Object(i.useEffect)((function(){""!==O&&(T(S.a.PENDING),m.d(O,g).then((function(t){var e=t.results;C((function(t){return[].concat(Object(a.a)(t),Object(a.a)(e))})),T(S.a.RESOLVED),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(t){J(t),T(S.a.REJECTED)})))}),[O,g]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(y,{onSearchbarSubmit:function(t){e.push(Object(o.a)(Object(o.a)({},n),{},{search:"query=".concat(t)})),v(t)}}),Object(c.jsx)(u.a,{autoClose:3e3,position:"top-center"}),R===S.a.PENDING&&Object(c.jsx)("p",{children:"Download movie collection"}),R===S.a.REJECTED&&Object(c.jsx)("p",{children:q}),R===S.a.RESOLVED&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(l.a,{children:[D.length<1&&Object(c.jsx)("div",{className:_.a.listNotification,children:"No results for your request."}),D.map((function(t){return Object(c.jsx)(j.a,{className:_.a.item,children:Object(c.jsx)(s.b,{className:_.a.title,to:{pathname:"/movies/".concat(t.id),state:{from:n}},children:t.title})},t.id)}))]}),D.length>0&&Object(c.jsxs)(f.a,{onClick:function(){return w((function(t){return t+1}))},variant:"outlined",children:["Load more",Object(c.jsx)(d.a,{fontSize:"small"})]})]})]})}}}]);
//# sourceMappingURL=MoviesView.3b35d49f.chunk.js.map